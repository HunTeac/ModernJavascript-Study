## 다양한 함수의 형태

### 즉시 실행 함수

- 함수의 정의와 동시에 즉시 호출되는 함수를 **즉시 실행 함수**라고 한다.
- 즉시 실행 함수는 단 한 번만 호출되며 다시 호출할 수 없다.

```javascript
// 익명 즉시 실행 함수
(function () {
  var a = 3;
  var b = 5;
  return a * b;
})();

// 화살표 함수로도 사용 가능하다
(() => {
  var a = 3;
  var b = 5;
  return a * b;
})();
```

- 즉시 실행 함수는 함수 이름이 없는 익명 함수를 사용하는 것이 일반적이다.
- 아래와 같이 기명 즉시 실행 함수도 사용할 수 있지만, 다시 호출하는 것은 불가능하다.

```javascript
// 기명 즉시 실행 함수
(function foo() {
  var a = 3;
  var b = 5;
  return a * b;
})();

foo(); // ReferenceError: foo is not defined
```

- 즉시 실행 함수는 반드시 그룹 연산자 (...)로 감싸야 한다. 함수 정의가 함수 선언문의 형식에 맞지 않기 때문에 에러가 발생한다.
- 그렇다면 즉시 실행 함수를 사용하는 이유가 뭘까?

**1. 불필요한 전역 변수 줄이기**

- 함수를 생성하면 그 함수는 전역 변수로서 남아있게 되고, 많은 변수의 생성은 전역 스코프를 오염시킬 수 있다.

- 즉시 실행 함수를 선언하면 내부 변수가 전역으로 저장되지 않기 때문에 전역 스코프의 오염을 줄일 수 있다.

**2. private한 변수 생성**

- 즉시 실행 함수는 **외부에서 접근할 수 없는** 자체적인 스코프를 가진다. 이는 클로저의 사용 목적과도 비슷하며 내부 변수를 외부로부터 private하게 보호할 수 있다.

### 재귀 함수

- 함수가 자기 자신을 호출하는 것을 **재귀 호출(recursive call)**이라 한다.
- 무한 반복을 예방하기 위해서 **종료 조건(탈출 조건)**을 설정해줘야 한다.
- 종료 조건이 없으면 스택 오버플로 에러가 발생한다.

```javascript
// 팩토리얼 예제
// n! = 1 * 2 * ... * (n - 1) * n
function factorial(n) {
  // 탈출 조건: n이 1이하일 때 재귀 호출을 멈춘다.
  if (n <= 1) return 1;
  // 재귀 호출
  return n * factorial(n - 1);
}

console.log(factorial(5));
```

### 중첩 함수

- 함수 내부에 정의된 함수를 중첩(nested) 함수 또는 내부(inner) 함수라 한다.
- 언제 중첩함수를 사용해야 할까?

**1. 클린 코드적 관점**

- 함수가 반복된 코드의 재사용을 위해서 사용되는 경우가 많지만 함수는 클린코드적 관점에서 충분한 의미가 있다.

```javascript
// 유저가 무직자인지 확인한다.
if (user.job == null) {
  ...
}
```

```javascript
if (user.isUnemployed()) {
  ...
}
```

- 두 개의 코드 예제는 같은 행동을 나타낸다.
- 위의 코드 예제는 주석으로써 의도를 표현하고 있지만, 아래의 코드 예제는 코드 그 자체로 의도를 표현하고 있다.
- 코드의 의도를 주절주절 설명하는 주석이 많아지면 코드가 더러워지고 가독성은 떨어지게 된다.
- 즉, 단위 로직을 함수로 만드는 행위는 클린 코드에 도움이 되고, 이러한 관점에서 볼 때 자바스크립트의 중첩 함수는 좀 더 강력한 도구가 된다.

```javascript
function foo() {
  function bar() {
    console.log('Hello');
  }

  bar(); // Hello가 출력된다.
}

bar(); // 에러발생!, bar is not defined
```

- 중첩함수는 선언된 함수 내부가 아니면 호출하는 것이 불가능하다.

- bar함수를 foo함수 내부에 위치시킨다는 것은 bar함수는 foo함수 내부에서만 사용될 것임을 명시적으로 나타낸다. 이는 코드를 읽어나가는데 분명한 도움이 된다.
